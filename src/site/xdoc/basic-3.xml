<?xml version="1.0"?>
<document xmlns="http://maven.apache.org/XDOC/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
<properties>
	<title>@Springfield - Basic</title>
	<author email="u2waremanager@gmail.com">www.u2ware.com</author>
</properties>

<body>
<section name="@Springfield - Basic">
	<subsection name="Code">
		<source><![CDATA[
package com.u2ware.springfield.sample.part1.step3;

import lombok.Getter;
import lombok.Setter;
import lombok.ToString;

import org.springframework.data.annotation.Id;
import org.springframework.data.mongodb.core.mapping.Document;

import com.u2ware.springfield.config.Springfield;
import com.u2ware.springfield.config.Springfield.Strategy;

@Springfield(
	strategy=Strategy.MONGODB
)
@Document
public @ToString class MongodbBean {

	@Id
	@Getter @Setter private String id;
	@Getter @Setter private String password;
	@Getter @Setter private String name;
	@Getter @Setter private Integer age;
}
		]]></source>
	</subsection>

	<subsection name="Beans">
		<p><b>@Springfield(strategy=Strategy.SQLSESSION)</b> 선언으로 다음 4개의 Bean 이 자동 생성, 등록 된다.</p>	
		<table border="1">
			<tr><th>bean name  </th>	<th>bean type</th>	<th>bean implement</th></tr>
			<tr><td>"mongodbBeanController"</td><td><i><![CDATA[EntityController<MongodbBean, MongodbBean>]]></i></td><td>com.u2ware.springfield.controller. EntityHandler</td></tr>
			<tr><td>"mongodbBeanValidator"</td> <td><i><![CDATA[EntityValidator<MongodbBean, MongodbBean>]]></i></td> <td>com.u2ware.springfield.validation. EntityValidatorImpl</td></tr>
			<tr><td>"mongodbBeanService"</td>   <td><i><![CDATA[EntityService<MongodbBean, MongodbBean>]]></i></td>   <td>com.u2ware.springfield.service. EntityServiceImpl</td></tr>
			<tr><td>"mongodbBeanRepository"</td><td><i><![CDATA[EntityRepository<MongodbBean, String>]]></i></td><td><b>com.u2ware.springfield.repository.mongodb. EntityMongodbRepository</b></td></tr>
		</table>
	</subsection>
	<subsection name="RequestMapping">
		<p>CRUD 를 기본으로 한 EntityController 의 9 개 method 를 <a href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-methods">RequestMapping</a> 한다.</p>
		<table border="1">
			<tr><th>매핑 경로</th>	<th>HTTP Method</th>	<th>Controller Method 이름</th>	<th>예제 Command 객체</th>	<th>예제 매핑 경로</th></tr>
			<tr><td><i>/{topLevelMapping}/</i></td>         <td>GET</td>   <td>home()</td>      <td>MongodbBean</td><td>/part1/step3/</td></tr>
			<tr><td><i>/{topLevelMapping}</i></td>          <td>GET</td>   <td>findForm()</td>  <td>MongodbBean</td><td>/part1/step3</td></tr>
			<tr><td><i>/{topLevelMapping}</i></td>          <td>POST</td>  <td>find()</td>      <td>MongodbBean</td><td>/part1/step3</td></tr>
			<tr><td><i>/{topLevelMapping}/{id}</i></td>     <td>GET</td>   <td>read()</td>      <td>MongodbBean</td><td>/part1/step3/baz</td></tr>
			<tr><td><i>/{topLevelMapping}/new</i></td>      <td>GET</td>   <td>createForm()</td><td>MongodbBean</td><td>/part1/step3/new</td></tr>
			<tr><td><i>/{topLevelMapping}/new</i></td>      <td>POST</td>  <td>create()</td>    <td>MongodbBean</td><td>/part1/step3/new</td></tr>
			<tr><td><i>/{topLevelMapping}/{id}/edit</i></td><td>GET</td>   <td>updateForm()</td><td>MongodbBean</td><td>/part1/step3/baz/eidt</td></tr>
			<tr><td><i>/{topLevelMapping}/{id}/edit</i></td><td>PUT</td>   <td>update()</td>    <td>MongodbBean</td><td>/part1/step3/baz/eidt</td></tr>
			<tr><td><i>/{topLevelMapping}/{id}/edit</i></td><td>DELETE</td><td>delete()</td>    <td>MongodbBean</td><td>/part1/step3/baz/eidt</td></tr>
		</table>
		<dl>
			<dt>Note:</dt>
			<dd>@Springfield 는   <b>@org.springframework.data.annotation.Id</b> 가 선언된 bean property 를   RequestMapping 의 <b>{id}</b>에 매핑한다.</dd>
		</dl>
		<dl>
			<dt>Note:</dt>
			<dd>@Springfield 의 topLevelMapping 속성에 별도의 선언 이 없으면, basePackage 를 기준으로 결정된다.</dd>
			<dd>예제에서 basePackage 는 com.u2ware.springfield.sample 이므르 예제에서 topLevelMapping 은 /part1/step3 이 된다.</dd>
		</dl>
	</subsection>
	<subsection name="Mongodb">
		<dl>
			<dt>Reference</dt>
			<dd><a href="http://docs.mongodb.org/manual/tutorial/">mongodb</a></dd>
			<dd><a href="http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/">spring-data-mongdb</a></dd>
		</dl>
		<dl>
			<dt>application-context.properties:</dt>
			<dd><p>mongodb 설정</p></dd>
			<dd>orm.mongodb.host=localhost</dd>
			<dd>orm.mongodb.port=27017</dd>
		</dl>
	</subsection>
</section>
</body>
</document>